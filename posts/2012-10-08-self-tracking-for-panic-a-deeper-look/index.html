<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Self-Tracking For Panic: A bash-ful Look At Some Data</title>
    <meta name="description" content="Evan Savage&#39;s personal blog about software, life, travel, and other sundry things.">
    <link href='https://fonts.googleapis.com/css?family=PT%20Serif:400,400italic,500,500italic' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/css/index.css">
    <link rel="stylesheet" href="/css/prism-base16-monokai.dark.css">
    <link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="Evan Savage">
    <link rel="alternate" href="/feed/feed.json" type="application/json" title="Evan Savage">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
        },
      };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
  </head>
  <body>
    <header>
      <h1 class="home"><a href="/">Evan Savage</a></h1>

      <ul class="nav">
          <li class="nav-item"><a href="/">Home</a></li>
          <li class="nav-item"><a href="/posts/">Archive</a></li>
        <li class="nav-item"><a href="https://savageevan.com">About Me</a></li>
      </ul>
    </header>

    <main class="tmpl-post">
      <h1>Self-Tracking For Panic: A bash-ful Look At Some Data</h1>

<p>In this post, I perform initial exploratory analysis on my panic recovery journal data using basic UNIX/bash commands.</p>
<!-- more -->
<h2 id="unix%3F-bash%3F-you're-not-serious%2C-right%3F">UNIX? bash? You're not serious, right? <a class="direct-link" href="#unix%3F-bash%3F-you're-not-serious%2C-right%3F">#</a></h2>
<p>Most of the data-centric Quantified Self talks I've seen focus on more complicated methods, including:</p>
<ul>
<li><a href="http://en.wikipedia.org/wiki/Linear_regression">linear regression</a>, which <em>identifies gradual trends</em>;</li>
<li><a href="http://en.wikipedia.org/wiki/Fast_Fourier_transform">FFT</a>, which <em>identifies periodic effects</em>;</li>
<li><a href="http://en.wikipedia.org/wiki/Pearson_product-moment_correlation_coefficient">Pearson's r</a>, which <em>measures correlation between datasets</em>;</li>
<li><a href="http://en.wikipedia.org/wiki/Student's_t-test">t-test</a>, which <em>measures difference between datasets</em>.</li>
</ul>
<p>These are extremely powerful tools to have at your disposal. Better yet, many languages have community-contributed libraries that provide these tools out-of-the-box. For instance, Python's <code>scipy</code> offers <a href="http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.linregress.html">linregress</a> for performing linear regression.</p>
<p>That said, these tools rely on mathematics that is <em>opaque</em> to many software developers. Even if you don't need to know how they work to use them, you need some knowledge of <em>what they do</em> and <em>where they are most appropriate</em>. Statistical tests in particular often have <em>strong preconditions</em> for use:</p>
<blockquote cite="https://en.wikipedia.org/wiki/Student%27s_t-test">
  <p>
Each of the two populations being compared should follow a normal distribution.
</p>
  <footer>&ndash; Wikipedia, <cite><a href="https://en.wikipedia.org/wiki/Student%27s_t-test">Student's t-test</a></footer>
</blockquote>
<p>Even if you pick the right tool, there's still <em>fear associated with losing control</em>. These tools are not hammers and screwdrivers but magic wands, and <a href="http://www.flickr.com/photos/wishingline/7162517642/">we are terrible magicians</a>.</p>
<h3 id="a-word-on-exploratory-analysis">A Word On Exploratory Analysis <a class="direct-link" href="#a-word-on-exploratory-analysis">#</a></h3>
<p>I mentioned that this post would demonstrate <em>exploratory analysis</em>. This is a mode of analysis where you explore your data, play around with it a bit, grab some low-hanging analytical fruit. You don't necessarily need higher mathematics. Regular counts and averages will do. You're not looking for ironclad proof, but rather for <em>suggestions</em>.</p>
<blockquote>
What does this data suggest?
</blockquote>
<p>This is an important question. Put this way, <em>there is no &quot;right&quot; or &quot;wrong&quot; way to analyze your data</em>. UNIX tools fit in nicely here, because you can piece them together and pretty quickly get some useful insights. Better yet, since you understand what you just did, you can explain it to someone else. Analysis becomes a <em>demystified</em> and <em>shareable</em> process.</p>
<p>Exploratory analysis is also a <em>great entry point</em> to deeper and more directed analysis. As you work with the data, you ask more complicated questions. Eventually these questions exceed the sophistication of your tools, so you look for better tools. You might not deeply understand the better tools, but at least you've worked with the data a bit. You can <em>perform basic sanity checks</em> when these better tools turn up results you don't expect.</p>
<h2 id="the-data">The Data <a class="direct-link" href="#the-data">#</a></h2>
<p>I took my paper recovery journal logs:</p>
<img src="https://lh6.googleusercontent.com/-TDKFRsDfutE/UHNEPJReCOI/AAAAAAAAABU/q0sWUwRbPoE/s640/IMG_20121005_171146_426.jpg" alt="A page from my journal" />
<p>and manually converted them to handy CSV files:</p>
<pre class="language-bash"><code class="language-bash">date,relaxation,exercise,diet,supplements<br><span class="token punctuation">..</span>.<br><span class="token number">2012</span>-03-12,0,0,1,1<br><span class="token number">2012</span>-03-13,1,0,1,1<br><span class="token number">2012</span>-03-14,1,0,0,1<br><span class="token number">2012</span>-03-15,1,1,1,1<br><span class="token number">2012</span>-03-16,1,1,1,1<br><span class="token number">2012</span>-03-17,1,1,0,1<br><span class="token number">2012</span>-03-18,0,1,0,1<br><span class="token punctuation">..</span>.</code></pre>
<p>Where did all those different treatments go? I didn't end up using most of them. Making nine parallel habit changes is difficult, so I rapidly converged on a subset of four:</p>
<ul>
<li>relaxation breathing;</li>
<li>daily exercise;</li>
<li>dietary modifications; and</li>
<li>vitamin supplements.</li>
</ul>
<p>Why manual input? There wasn't enough data to make <a href="http://code.google.com/p/tesseract-ocr/">OCR</a> worthwhile:</p>
<pre class="language-bash"><code class="language-bash">$ <span class="token builtin class-name">cd</span> recovery-journal<br>$ <span class="token function">wc</span> -l * <span class="token operator">|</span> <span class="token function">grep</span> total<br>      <span class="token number">41</span> exercise-record<br>      <span class="token number">46</span> food-diary<br>       <span class="token number">8</span> panic-log<br>      <span class="token number">46</span> weekly-practice-record<br>     <span class="token number">141</span> total</code></pre>
<p>You can view and download the raw data files <a href="https://github.com/candu/quantified-savagery-files/tree/master/Panic/recovery-journal">here</a>.</p>
<h2 id="common-operations">Common Operations <a class="direct-link" href="#common-operations">#</a></h2>
<p>These operations appear several times in the UNIX one-liners below, so let's go over them quickly.</p>
<p>To lop off the CSV column name header:</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">tail</span> -n+2</code></pre>
<p>To extract field <span markdown="0">$ n $</span> from a CSV file:</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">cut</span> -d<span class="token string">','</span> -f<span class="token variable">$n</span></code></pre>
<p>To tabulate counts in descending order:</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">sort</span> <span class="token operator">|</span> <span class="token function">uniq</span> -c <span class="token operator">|</span> <span class="token function">sort</span> -rn</code></pre>
<p>To sum a series of numbers:</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">awk</span> <span class="token string">'{sum+=<span class="token variable">$1</span>} END {print sum}'</span></code></pre>
<p>To get the day before <code>$ds</code>:</p>
<pre class="language-bash"><code class="language-bash"><span class="token assign-left variable">ts</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> -j -f <span class="token string">"%Y-%m-%d"</span> $ds <span class="token string">"+%s"</span><span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token assign-left variable">tsprev</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$ts</span> - 86400"</span> <span class="token operator">|</span> <span class="token function">bc</span><span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token assign-left variable">dsprev</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> -j -f <span class="token string">"%s"</span> $tsprev <span class="token string">"+%Y-%m-%d"</span><span class="token variable">)</span></span><span class="token punctuation">;</span></code></pre>
<h2 id="and-now%2C-the-main-show">And Now, The Main Show <a class="direct-link" href="#and-now%2C-the-main-show">#</a></h2>
<p>Let's start by looking at my weekly practice record:</p>
<pre class="language-bash"><code class="language-bash">$ <span class="token keyword">for</span> <span class="token for-or-select variable">a</span> <span class="token keyword">in</span> <span class="token punctuation">[</span>01<span class="token punctuation">]</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token keyword">for</span> <span class="token for-or-select variable">b</span> <span class="token keyword">in</span> <span class="token punctuation">[</span>01<span class="token punctuation">]</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token keyword">for</span> <span class="token for-or-select variable">c</span> <span class="token keyword">in</span> <span class="token punctuation">[</span>01<span class="token punctuation">]</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token keyword">for</span> <span class="token for-or-select variable">d</span> <span class="token keyword">in</span> <span class="token punctuation">[</span>01<span class="token punctuation">]</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">grep</span> -E <span class="token string">",<span class="token variable">$a</span>,<span class="token variable">$b</span>,<span class="token variable">$c</span>,<span class="token variable">$d</span>$"</span> weekly-practice-record <span class="token operator">|</span> <span class="token function">wc</span> -l<span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> <span class="token variable">$a</span> <span class="token variable">$b</span> <span class="token variable">$c</span> <span class="token variable">$d</span> <span class="token variable">$count</span><span class="token punctuation">;</span> <span class="token keyword">done</span><span class="token punctuation">;</span> <span class="token keyword">done</span><span class="token punctuation">;</span> <span class="token keyword">done</span><span class="token punctuation">;</span> <span class="token keyword">done</span> <span class="token operator">|</span> <span class="token function">tr</span> <span class="token string">' '</span> <span class="token string">'<span class="token entity" title="\t">\t</span>'</span><br><span class="token punctuation">[</span>01<span class="token punctuation">]</span>    <span class="token punctuation">[</span>01<span class="token punctuation">]</span>    <span class="token punctuation">[</span>01<span class="token punctuation">]</span>    <span class="token punctuation">[</span>01<span class="token punctuation">]</span>    <span class="token number">45</span><br><span class="token punctuation">[</span>01<span class="token punctuation">]</span>    <span class="token punctuation">[</span>01<span class="token punctuation">]</span>    <span class="token punctuation">[</span>01<span class="token punctuation">]</span>    <span class="token number">1</span>       <span class="token number">43</span><br><span class="token punctuation">[</span>01<span class="token punctuation">]</span>    <span class="token punctuation">[</span>01<span class="token punctuation">]</span>    <span class="token number">1</span>       <span class="token punctuation">[</span>01<span class="token punctuation">]</span>    <span class="token number">22</span><br><span class="token punctuation">[</span>01<span class="token punctuation">]</span>    <span class="token punctuation">[</span>01<span class="token punctuation">]</span>    <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">21</span><br><span class="token punctuation">[</span>01<span class="token punctuation">]</span>    <span class="token number">1</span>       <span class="token punctuation">[</span>01<span class="token punctuation">]</span>    <span class="token punctuation">[</span>01<span class="token punctuation">]</span>    <span class="token number">32</span><br><span class="token punctuation">[</span>01<span class="token punctuation">]</span>    <span class="token number">1</span>       <span class="token punctuation">[</span>01<span class="token punctuation">]</span>    <span class="token number">1</span>       <span class="token number">31</span><br><span class="token punctuation">[</span>01<span class="token punctuation">]</span>    <span class="token number">1</span>       <span class="token number">1</span>       <span class="token punctuation">[</span>01<span class="token punctuation">]</span>    <span class="token number">16</span><br><span class="token punctuation">[</span>01<span class="token punctuation">]</span>    <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">16</span><br><span class="token number">1</span>       <span class="token punctuation">[</span>01<span class="token punctuation">]</span>    <span class="token punctuation">[</span>01<span class="token punctuation">]</span>    <span class="token punctuation">[</span>01<span class="token punctuation">]</span>    <span class="token number">36</span><br><span class="token number">1</span>       <span class="token punctuation">[</span>01<span class="token punctuation">]</span>    <span class="token punctuation">[</span>01<span class="token punctuation">]</span>    <span class="token number">1</span>       <span class="token number">34</span><br><span class="token number">1</span>       <span class="token punctuation">[</span>01<span class="token punctuation">]</span>    <span class="token number">1</span>       <span class="token punctuation">[</span>01<span class="token punctuation">]</span>    <span class="token number">19</span><br><span class="token number">1</span>       <span class="token punctuation">[</span>01<span class="token punctuation">]</span>    <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">18</span><br><span class="token number">1</span>       <span class="token number">1</span>       <span class="token punctuation">[</span>01<span class="token punctuation">]</span>    <span class="token punctuation">[</span>01<span class="token punctuation">]</span>    <span class="token number">26</span><br><span class="token number">1</span>       <span class="token number">1</span>       <span class="token punctuation">[</span>01<span class="token punctuation">]</span>    <span class="token number">1</span>       <span class="token number">25</span><br><span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">1</span>       <span class="token punctuation">[</span>01<span class="token punctuation">]</span>    <span class="token number">14</span><br><span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">14</span></code></pre>
<p>I tracked myself for 45 days. During that time, I followed all four treatments on 14 days. In order from most to least regular:</p>
<ul>
<li>vitamin supplements (43 days);</li>
<li>relaxation breathing (36 days);</li>
<li>daily exercise (32 days);</li>
<li>dietary modifications (22 days).</li>
</ul>
<p>I followed both the exercise and diet treatments for only 16 of 45 days! Right away, I have a question for further inquiry:</p>
<blockquote>
What was so hard about those two treatments?
</blockquote>
<h3 id="exercise">Exercise <a class="direct-link" href="#exercise">#</a></h3>
<pre class="language-bash"><code class="language-bash">$ <span class="token function">tail</span> -n+2 exercise-record <span class="token operator">|</span> <span class="token function">cut</span> -d<span class="token string">','</span> -f2 <span class="token operator">|</span> <span class="token function">sort</span> <span class="token operator">|</span> <span class="token function">uniq</span> -c <span class="token operator">|</span> <span class="token function">sort</span> -rn <span class="token operator">|</span> <span class="token function">head</span> -5<br>  <span class="token number">11</span> <span class="token number">16</span>:00<br>   <span class="token number">8</span> <span class="token number">20</span>:00<br>   <span class="token number">3</span> <span class="token number">15</span>:00<br>   <span class="token number">3</span> <span class="token number">14</span>:00<br>   <span class="token number">3</span> <span class="token number">12</span>:00</code></pre>
<p>My most common exercise times were 4pm and 8pm. What was I doing at those times?</p>
<pre class="language-bash"><code class="language-bash">$ <span class="token function">grep</span> <span class="token number">16</span>:00 exercise-record <span class="token operator">|</span> <span class="token function">cut</span> -d<span class="token string">','</span> -f3 <span class="token operator">|</span> <span class="token function">sort</span> <span class="token operator">|</span> <span class="token function">uniq</span> -c <span class="token operator">|</span> <span class="token function">sort</span> -rn <span class="token operator">|</span> <span class="token function">head</span> -1<br>   <span class="token number">9</span> conditioning<br>$ <span class="token function">grep</span> <span class="token number">20</span>:00 exercise-record <span class="token operator">|</span> <span class="token function">cut</span> -d<span class="token string">','</span> -f3 <span class="token operator">|</span> <span class="token function">sort</span> <span class="token operator">|</span> <span class="token function">uniq</span> -c <span class="token operator">|</span> <span class="token function">sort</span> -rn <span class="token operator">|</span> <span class="token function">head</span> -1<br>   <span class="token number">6</span> soccer</code></pre>
<p>Aha! 4pm was my scheduled gym time at work, and 8pm was when I went for <a href="http://soccerfours.com/">weekly pickup soccer</a>. Both were regularly scheduled activities.</p>
<pre class="language-bash"><code class="language-bash">$ <span class="token function">grep</span> -E <span class="token string">"(00|01|02|03|04|05|06|07|08|09|10|11):00"</span> exercise-record <span class="token operator">|</span> <span class="token function">wc</span> -l<br>       <span class="token number">7</span><br>$ <span class="token function">grep</span> -E <span class="token string">"(12|13|14|15|16|17|18|19|20|21|22|23):00"</span> exercise-record <span class="token operator">|</span> <span class="token function">wc</span> -l<br>       <span class="token number">33</span></code></pre>
<p>I rarely exercise in the morning, which might be okay: physical performance is <a href="http://online.wsj.com/article/SB10000872396390444180004578018294057070544.html">higher in the afternoon</a>.</p>
<pre class="language-bash"><code class="language-bash">$ <span class="token function">tail</span> -n+2 exercise-record <span class="token operator">|</span> <span class="token function">cut</span> -d<span class="token string">','</span> -f3 <span class="token operator">|</span> <span class="token function">sort</span> <span class="token operator">|</span> <span class="token function">uniq</span> -c <span class="token operator">|</span> <span class="token function">sort</span> -rn<br>  <span class="token number">15</span> conditioning<br>   <span class="token number">7</span> soccer<br>   <span class="token number">6</span> walking<br>   <span class="token number">6</span> cycling<br>   <span class="token number">2</span> running<br>   <span class="token number">2</span> dancing<br>   <span class="token number">1</span> swimming<br>   <span class="token number">1</span> longboarding</code></pre>
<p>It's not surprising to see gym conditioning sets and soccer as my top activities, but walking and cycling aren't far behind.</p>
<pre class="language-bash"><code class="language-bash">$ <span class="token function">tail</span> -n+2 exercise-record <span class="token operator">|</span> <span class="token function">cut</span> -d<span class="token string">','</span> -f4 <span class="token operator">|</span> <span class="token function">sort</span> <span class="token operator">|</span> <span class="token function">uniq</span> -c <span class="token operator">|</span> <span class="token function">sort</span> -rn<br>  <span class="token number">20</span> <span class="token number">30</span><br>  <span class="token number">11</span> <span class="token number">60</span><br>   <span class="token number">4</span> <span class="token number">45</span><br>   <span class="token number">2</span> <span class="token number">40</span><br>   <span class="token number">2</span> <span class="token number">240</span><br>   <span class="token number">1</span> <span class="token number">120</span></code></pre>
<p>I most commonly exercised for 30-60 minutes, with infrequent longer blocks of activity. What was I doing in those longer blocks?</p>
<pre class="language-bash"><code class="language-bash">$ <span class="token function">grep</span> -E <span class="token string">",(120|240)$"</span> exercise-record<br><span class="token number">2012</span>-01-27,20:00,dancing,120<br><span class="token number">2012</span>-01-29,10:00,walking,240<br><span class="token number">2012</span>-02-11,12:00,walking,240</code></pre>
<p>When else was I dancing?</p>
<pre class="language-bash"><code class="language-bash">$ <span class="token function">grep</span> dancing exercise-record<br><span class="token number">2012</span>-01-27,20:00,dancing,120<br><span class="token number">2012</span>-02-03,21:00,dancing,30</code></pre>
<p>Looking at my calendar, these blocks are easily identified:</p>
<img src="https://lh6.googleusercontent.com/-BMXU2Ek3Ng0/UHNJnPz-bqI/AAAAAAAAABw/3vSmmAKQzQo/s800/Screen%2520Shot%25202012-10-08%2520at%25205.45.17%2520PM.jpg" alt="Jan 27, 2012" />
<img src="https://lh4.googleusercontent.com/-EWShEmAoYPc/UHNJnuc6eGI/AAAAAAAAAB4/nWSI-zqtp_U/s800/Screen%2520Shot%25202012-10-08%2520at%25205.45.37%2520PM.jpg" alt="Feb 03, 2012" />
<p>Having fun is great for my health!</p>
<h3 id="diet">Diet <a class="direct-link" href="#diet">#</a></h3>
<pre class="language-bash"><code class="language-bash">$ <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">seq</span> <span class="token number">2</span> <span class="token number">5</span><span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">cut</span> -d<span class="token string">','</span> -f$i food-diary <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{ sum+=<span class="token variable">$1</span>} END {print sum}'</span><span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">head</span> -1 food-diary <span class="token operator">|</span> <span class="token function">cut</span> -d<span class="token string">','</span> -f$i<span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token builtin class-name">printf</span> <span class="token string">"%12s<span class="token entity" title="\t">\t</span>%s<span class="token entity" title="\n">\n</span>"</span> <span class="token variable">$name</span> <span class="token variable">$count</span><span class="token punctuation">;</span> <span class="token keyword">done</span><br>    caffeine    <span class="token number">6</span><br>      sweets    <span class="token number">48</span><br>     alcohol    <span class="token number">140</span><br> supplements    <span class="token number">42</span></code></pre>
<p>I nearly eliminated caffeine during this period! By the time I started keeping the log, I'd already started to reduce my consumption. On average, I had just over one sweet per day. More troubling is alcohol, with an average of 3.1 drinks/day. Let's take a closer look at my drinking patterns.</p>
<pre class="language-bash"><code class="language-bash">$ <span class="token function">tail</span> -n+2 food-diary <span class="token operator">|</span> <span class="token function">cut</span> -d<span class="token string">','</span> -f4 <span class="token operator">|</span> <span class="token function">sort</span> <span class="token operator">|</span> <span class="token function">uniq</span> -c <span class="token operator">|</span> <span class="token function">sort</span> -rn<br>  <span class="token number">12</span> <span class="token number">4</span><br>   <span class="token number">9</span> <span class="token number">2</span><br>   <span class="token number">7</span> <span class="token number">1</span><br>   <span class="token number">6</span> <span class="token number">5</span><br>   <span class="token number">3</span> <span class="token number">3</span><br>   <span class="token number">2</span> <span class="token number">8</span><br>   <span class="token number">2</span> <span class="token number">6</span><br>   <span class="token number">2</span> <span class="token number">0</span><br>   <span class="token number">2</span></code></pre>
<p>My most common daily drinking amounts were 1, 2, and 4 drinks per day. It was very rare for me to go a day without drinking any alcohol. More alarmingly, <a href="http://en.wikipedia.org/wiki/Binge_drinking#Definition">binge drinking</a> counts for <em>over 40% of my alcohol consumption!</em></p>
<pre class="language-bash"><code class="language-bash">$ <span class="token function">tail</span> -n+2 food-diary <span class="token operator">|</span> <span class="token keyword">while</span> <span class="token builtin class-name">read</span> line<span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token assign-left variable">weekday</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> -j -f <span class="token string">"%Y-%m-%d"</span> <span class="token punctuation">$(</span>echo $line <span class="token operator">|</span> <span class="token function">cut</span> -d<span class="token string">','</span> -f1<span class="token punctuation">)</span> <span class="token string">"+%a"</span><span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token assign-left variable">alcohol</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> $line <span class="token operator">|</span> <span class="token function">cut</span> -d<span class="token string">','</span> -f4<span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> <span class="token variable">$weekday</span> <span class="token variable">$alcohol</span><span class="token punctuation">;</span> <span class="token keyword">done</span> <span class="token operator">></span> drinking.log<br>$ <span class="token keyword">for</span> <span class="token for-or-select variable">weekday</span> <span class="token keyword">in</span> Mon Tue Wed Thu Fri Sat Sun<span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">grep</span> $weekday drinking.log <span class="token operator">|</span> <span class="token function">cut</span> -d<span class="token string">' '</span> -f2 <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{ sum+=<span class="token variable">$1</span>} END {print sum}'</span><span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> <span class="token variable">$count</span> <span class="token variable">$weekday</span><span class="token punctuation">;</span> <span class="token keyword">done</span> <span class="token operator">|</span> <span class="token function">sort</span> -rn<br><span class="token number">28</span> Wed<br><span class="token number">27</span> Sat<br><span class="token number">23</span> Mon<br><span class="token number">20</span> Sun<br><span class="token number">19</span> Fri<br><span class="token number">15</span> Tue<br><span class="token number">8</span> Thu</code></pre>
<p>I drank most on Wednesdays and Saturdays; Mondays were also major drinking days, which is surprising! By contrast, I drank much less than average on Thursdays. When I narrow in on binge drinking, the pattern shifts slightly:</p>
<pre class="language-bash"><code class="language-bash">$ <span class="token function">grep</span> -E <span class="token string">"(5|6|7|8)$"</span> drinking.log <span class="token operator">|</span> <span class="token function">cut</span> -d<span class="token string">' '</span> -f1 <span class="token operator">|</span> <span class="token function">sort</span> <span class="token operator">|</span> <span class="token function">uniq</span> -c <span class="token operator">|</span> <span class="token function">sort</span> -rn<br>   <span class="token number">4</span> Sat<br>   <span class="token number">3</span> Sun<br>   <span class="token number">2</span> Wed<br>   <span class="token number">1</span> Fri</code></pre>
<p>Wednesday is still an offender, but the weekends are clear culprits. <em>80% of my binge drinking days fell on weekends.</em></p>
<pre class="language-bash"><code class="language-bash">$ <span class="token function">tail</span> -n+2 food-diary <span class="token operator">|</span> <span class="token function">cut</span> -d<span class="token string">','</span> -f1,4 <span class="token operator">|</span> <span class="token function">grep</span> -E <span class="token string">"(5|6|7|8)$"</span> <span class="token operator">|</span> <span class="token keyword">while</span> <span class="token builtin class-name">read</span> line<span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token assign-left variable">ds</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> $line <span class="token operator">|</span> <span class="token function">cut</span> -d<span class="token string">','</span> -f1<span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token assign-left variable">ts</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> -j -f <span class="token string">"%Y-%m-%d"</span> $ds <span class="token string">"+%s"</span><span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token assign-left variable">ts_next</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$ts</span> + 86400"</span> <span class="token operator">|</span> <span class="token function">bc</span><span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token assign-left variable">ds_next</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> -j -f <span class="token string">"%s"</span> $ts_next <span class="token string">"+%Y-%m-%d"</span><span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> <span class="token variable">$line</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">grep</span> $ds_next food-diary <span class="token operator">|</span> <span class="token function">cut</span> -d<span class="token string">','</span> -f1,4<span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token keyword">done</span><br><span class="token number">2012</span>-01-21,5 <span class="token number">2012</span>-01-22,5<br><span class="token number">2012</span>-01-22,5 <span class="token number">2012</span>-01-23,1<br><span class="token number">2012</span>-01-28,8 <span class="token number">2012</span>-01-29,2<br><span class="token number">2012</span>-02-01,6 <span class="token number">2012</span>-02-02,0<br><span class="token number">2012</span>-02-04,5 <span class="token number">2012</span>-02-05,3<br><span class="token number">2012</span>-02-10,6 <span class="token number">2012</span>-02-11,4<br><span class="token number">2012</span>-02-12,5 <span class="token number">2012</span>-02-13,3<br><span class="token number">2012</span>-03-14,8 <span class="token number">2012</span>-03-15,0<br><span class="token number">2012</span>-03-17,5 <span class="token number">2012</span>-03-18,5<br><span class="token number">2012</span>-03-18,5 <span class="token number">2012</span>-03-19,4</code></pre>
<p>Among days where I had 5 or more drinks, I had an average of 2.7 drinks the next day.</p>
<pre class="language-bash"><code class="language-bash">$ <span class="token function">tail</span> -n+2 food-diary <span class="token operator">|</span> <span class="token function">cut</span> -d<span class="token string">','</span> -f1,4 <span class="token operator">|</span> <span class="token function">grep</span> -E <span class="token string">"(0|1)$"</span> <span class="token operator">|</span> <span class="token keyword">while</span> <span class="token builtin class-name">read</span> line<span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token assign-left variable">ds</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> $line <span class="token operator">|</span> <span class="token function">cut</span> -d<span class="token string">','</span> -f1<span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token assign-left variable">ts</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> -j -f <span class="token string">"%Y-%m-%d"</span> $ds <span class="token string">"+%s"</span><span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token assign-left variable">tsprev</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$ts</span> - 86400"</span> <span class="token operator">|</span> <span class="token function">bc</span><span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token assign-left variable">dsprev</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> -j -f <span class="token string">"%s"</span> $tsprev <span class="token string">"+%Y-%m-%d"</span><span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">grep</span> $dsprev food-diary <span class="token operator">|</span> <span class="token function">cut</span> -d<span class="token string">','</span> -f1,4<span class="token variable">)</span></span> <span class="token variable">$line</span><span class="token punctuation">;</span> <span class="token keyword">done</span><br><span class="token number">2012</span>-01-22,5 <span class="token number">2012</span>-01-23,1<br><span class="token number">2012</span>-01-23,1 <span class="token number">2012</span>-01-24,1<br><span class="token number">2012</span>-01-30,4 <span class="token number">2012</span>-01-31,1<br><span class="token number">2012</span>-02-01,6 <span class="token number">2012</span>-02-02,0<br><span class="token number">2012</span>-02-05,3 <span class="token number">2012</span>-02-06,1<br><span class="token number">2012</span>-02-06,1 <span class="token number">2012</span>-02-07,1<br><span class="token number">2012</span>-02-08,4 <span class="token number">2012</span>-02-09,1<br><span class="token number">2012</span>-03-14,8 <span class="token number">2012</span>-03-15,0<br><span class="token number">2012</span>-03-15,0 <span class="token number">2012</span>-03-16,1</code></pre>
<p>Among days where I had fewer than 2 drinks, I had consumed an average of 3.6 drinks the previous day. This suggests a <em>see-saw pattern</em>: I would drink too much one day, back off the next, and repeat.</p>
<h3 id="panic">Panic <a class="direct-link" href="#panic">#</a></h3>
<p>All of this skirts the real question:</p>
<blockquote>
What caused me to have panic attacks?
</blockquote>
<pre class="language-bash"><code class="language-bash">$ <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">seq</span> <span class="token number">2</span> <span class="token number">4</span><span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token function">head</span> -1 food-diary <span class="token operator">|</span> <span class="token function">cut</span> -d<span class="token string">','</span> -f<span class="token variable">$i</span><span class="token punctuation">;</span> <span class="token function">tail</span> -n+2 panic-log <span class="token operator">|</span> <span class="token function">cut</span> -d<span class="token string">','</span> -f1 <span class="token operator">|</span> <span class="token keyword">while</span> <span class="token builtin class-name">read</span> ds<span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token assign-left variable">ts</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> -j -f <span class="token string">"%Y-%m-%d"</span> $ds <span class="token string">"+%s"</span><span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token assign-left variable">tsprev</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$ts</span> - 86400"</span> <span class="token operator">|</span> <span class="token function">bc</span><span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token assign-left variable">dsprev</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> -j -f <span class="token string">"%s"</span> $tsprev <span class="token string">"+%Y-%m-%d"</span><span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">grep</span> $dsprev food-diary <span class="token operator">|</span> <span class="token function">cut</span> -d<span class="token string">','</span> -f1,2<span class="token variable">)</span></span> <span class="token variable"><span class="token variable">$(</span><span class="token function">grep</span> $ds food-diary <span class="token operator">|</span> <span class="token function">cut</span> -d<span class="token string">','</span> -f1,$i<span class="token variable">)</span></span> <span class="token variable">$ds</span><span class="token punctuation">;</span> <span class="token keyword">done</span><span class="token punctuation">;</span> <span class="token keyword">done</span><br>caffeine<br><span class="token number">2012</span>-01-28,0 <span class="token number">2012</span>-01-29,0 <span class="token number">2012</span>-01-29<br><span class="token number">2012</span>-01-31,0 <span class="token number">2012</span>-02-01,0 <span class="token number">2012</span>-02-01<br><span class="token number">2012</span>-02-03,0 <span class="token number">2012</span>-02-04,0 <span class="token number">2012</span>-02-04<br><span class="token number">2012</span>-02-07,0 <span class="token number">2012</span>-02-08,1 <span class="token number">2012</span>-02-08<br><span class="token number">2012</span>-02-12,0 <span class="token number">2012</span>-02-13,0 <span class="token number">2012</span>-02-13<br><span class="token number">2012</span>-02-29<br><span class="token number">2012</span>-03-12,0 <span class="token number">2012</span>-03-13,1 <span class="token number">2012</span>-03-13<br>sweets<br><span class="token number">2012</span>-01-28,0 <span class="token number">2012</span>-01-29,3 <span class="token number">2012</span>-01-29<br><span class="token number">2012</span>-01-31,0 <span class="token number">2012</span>-02-01,1 <span class="token number">2012</span>-02-01<br><span class="token number">2012</span>-02-03,0 <span class="token number">2012</span>-02-04,2 <span class="token number">2012</span>-02-04<br><span class="token number">2012</span>-02-07,0 <span class="token number">2012</span>-02-08,1 <span class="token number">2012</span>-02-08<br><span class="token number">2012</span>-02-12,0 <span class="token number">2012</span>-02-13,1 <span class="token number">2012</span>-02-13<br><span class="token number">2012</span>-02-29<br><span class="token number">2012</span>-03-12,0 <span class="token number">2012</span>-03-13,1 <span class="token number">2012</span>-03-13<br>alcohol<br><span class="token number">2012</span>-01-28,0 <span class="token number">2012</span>-01-29,2 <span class="token number">2012</span>-01-29<br><span class="token number">2012</span>-01-31,0 <span class="token number">2012</span>-02-01,6 <span class="token number">2012</span>-02-01<br><span class="token number">2012</span>-02-03,0 <span class="token number">2012</span>-02-04,5 <span class="token number">2012</span>-02-04<br><span class="token number">2012</span>-02-07,0 <span class="token number">2012</span>-02-08,4 <span class="token number">2012</span>-02-08<br><span class="token number">2012</span>-02-12,0 <span class="token number">2012</span>-02-13,3 <span class="token number">2012</span>-02-13<br><span class="token number">2012</span>-02-29<br><span class="token number">2012</span>-03-12,0 <span class="token number">2012</span>-03-13,2 <span class="token number">2012</span>-03-13</code></pre>
<p>I had no data for <code>2012-02-28</code>. Other than that, on days where I had reported panic attacks, my <em>current- and previous-day consumption patterns</em> were:</p>
<ul>
<li><strong>alcohol</strong>: 3.7 drinks that day, 3.8 the previous day (overall average is 3.1);</li>
<li><strong>sweets</strong>: 1.5 sweets that day, 1.0 the previous day (overall average is 1.0);</li>
<li><strong>caffeine</strong>: 0.3 caffeinated beverages that day, 0.0 the previous day (overall average is 0.1).</li>
</ul>
<p>This suggests that <em>reducing alcohol and sweets consumption does help</em>. The data is less clear on caffeine; as previously mentioned, I had mostly cut out caffeine by the time I started tracking.</p>
<h2 id="up-next">Up Next <a class="direct-link" href="#up-next">#</a></h2>
<p>In the next post, I'll run some of the statistical tests and transformations mentioned previously on this same data. I'll also compare this dataset with another dataset gathered through <a href="https://github.com/candu/qs-counters">qs-counters</a>, a simple lightweight tracking utility I built to reduce friction in the recording process.</p>


<hr>
<ul><li>Next: <a href="/posts/2012-10-09-self-tracking-for-panic-an-even-deeper-look/">Self-Tracking For Panic: A Deeper Look</a></li><li>Previous: <a href="/posts/2012-10-03-panic/">Panic!</a></li>
</ul>

    </main>

    <footer></footer>

    <!-- Current page: /posts/2012-10-08-self-tracking-for-panic-a-deeper-look/ -->
  </body>
</html>
